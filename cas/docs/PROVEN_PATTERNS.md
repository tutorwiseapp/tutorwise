# Proven Patterns

**Generated by:** CAS Analyst Agent
**Date:** 2025-10-12

## 1. Overview

This document outlines the proven architectural and structural patterns that should be used when building new features for the `tutorwise` web application. Following these patterns is critical to ensure visual consistency and avoid the layout and styling issues encountered in the past (e.g., the "Listing Wizard" incident).

## 2. Page Layout Pattern

**Problem:** The root `Layout.tsx` file wraps all pages in a flex container, which can interfere with the layout of complex pages like wizards or dashboards.

**Proven Solution:** Do not fight the global layout. Instead, create a dedicated page wrapper component for your feature and style it with a CSS Module.

**Example (`Listing Wizard` fix):**

1.  **Create a `page.tsx` file for your feature:**

    ```tsx
    // apps/web/src/app/your-feature/page.tsx
    import styles from './page.module.css';
    import { YourFeatureComponent } from '@/app/components/your-feature';

    export default function YourFeaturePage() {
      return (
        <div className={styles.yourFeaturePage}>
          <YourFeatureComponent />
        </div>
      );
    }
    ```

2.  **Create a corresponding `page.module.css` file:**

    ```css
    /* apps/web/src/app/your-feature/page.module.css */
    .yourFeaturePage {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: var(--color-bg-page);
    }
    ```

This pattern isolates your feature's layout from the global layout and provides a predictable container for your components.

## 3. Wizard Component Pattern

**Problem:** Multi-step flows, like onboarding or wizards, require careful state management and a clear separation of concerns.

**Proven Solution:** Use a main "Wizard" component to manage the overall state and flow, and separate each step into its own component.

**Example (`OnboardingWizard.tsx`):

1.  **Main Wizard Component (`OnboardingWizard.tsx`):**
    *   Manages the `currentStep` state.
    *   Handles navigation logic (`onNext`, `onBack`).
    *   Renders the appropriate step component based on the `currentStep`.
    *   Contains the main layout and styling for the wizard container.

2.  **Step Components (`WelcomeStep.tsx`, `RoleSelectionStep.tsx`, etc.):**
    *   Each step is a self-contained component.
    *   Receives `onNext` and `onBack` functions as props.
    *   Is responsible for its own internal state and validation.
    *   Does not contain any layout or styling that belongs to the main wizard container.

This pattern makes the wizard easy to manage, test, and modify.
