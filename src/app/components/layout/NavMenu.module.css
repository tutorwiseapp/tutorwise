/*
 * Filename: src/app/components/layout/NavMenu.module.css
 * Purpose: Provides styles for the NavMenu component, trigger, and dropdown panel.
 *
 * Change History:
 * C005 - 2025-07-20 : 19:30 - Finalized trigger design: removed focus outline and equalized icon sizes.
 * C004 - 2025-07-20 : 19:15 - Implemented the Airbnb-style two-circle trigger design.
 * C003 - 2025-07-20 : 18:45 - Added styles for the "pill" trigger and role label.
 * C002 - 2025-07-20 : 18:30 - Removed border from menu trigger to finalize sphere design.
 * C001 - [Date] : [Time] - Initial creation.
 *
 * Last Modified: 2025-07-20 : 19:30
 * Requirement ID (optional): VIN-UI-011
 *
 * Change Summary:
 * The trigger button now has `outline: none` and a custom `:focus-visible` style to remove the
 * default blue square border. The avatar size has been increased to 40px to match the sphere,
 * creating a perfectly balanced and symmetrical component.
 *
 * Impact Analysis:
 * This is the final aesthetic and accessibility polish for the navigation menu.
 */

/* --- Triggers --- */

.loggedOutTrigger, .loggedInTrigger {
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  border: none;
  background: transparent;
  padding: 0;
  border-radius: var(--border-radius-full); /* Ensures focus shadow is rounded */
  
  /* --- FIX 1: Remove the default blue browser outline --- */
  outline: none;
}

/* The trigger for logged-in users: a pill container for two circles */
.loggedInTrigger {
  gap: var(--space-1);
  padding: 4px;
  border: 1px solid var(--color-border);
  background-color: var(--color-bg-card);
  transition: box-shadow 0.2s ease;
}

/* --- FIX 1 (cont.): Add a custom focus style for accessibility --- */
/* This applies the shadow on hover OR when focused via keyboard */
.loggedInTrigger:hover,
.loggedInTrigger:focus-visible {
  box-shadow: var(--shadow-md);
}

.avatar {
  /* --- FIX 2: Increase avatar size to match the sphere --- */
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}

/* --- Dropdown Menu --- */

.menuContent {
  min-width: 240px;
  background-color: var(--color-bg-card);
  border-radius: var(--border-radius-lg);
  padding: var(--space-1);
  box-shadow: var(--shadow-md);
  border: 1px solid var(--color-border);
  z-index: 50;
  animation: slideDownAndFade 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

.roleLabel {
  font-size: var(--font-size-sm);
  color: var(--color-text-primary);
  padding: var(--space-2) var(--space-2);
  font-weight: var(--font-weight-semibold);
  user-select: none;
}

.switchLabel {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  padding: var(--space-1) var(--space-2);
  font-weight: var(--font-weight-medium);
  user-select: none;
}

.roleItem {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  line-height: 1;
  border-radius: var(--border-radius-sm);
  display: flex;
  align-items: center;
  height: 40px;
  padding: 0 var(--space-2);
  position: relative;
  user-select: none;
  outline: none;
  cursor: pointer;
  text-decoration: none;
}

.roleItem:hover, .roleItem:focus {
  background-color: var(--color-bg-page);
  color: var(--color-primary);
}

.roleItem:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.menuItem {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  line-height: 1;
  border-radius: var(--border-radius-sm);
  display: flex;
  align-items: center;
  height: 40px;
  padding: 0 var(--space-2);
  position: relative;
  user-select: none;
  outline: none;
  cursor: pointer;
  text-decoration: none;
}
.menuItem:hover, .menuItem:focus {
  background-color: var(--color-bg-page);
  color: var(--color-primary);
}

.logoutItem {
  color: var(--color-error);
}
.logoutItem:hover, .logoutItem:focus {
  background-color: var(--color-error-bg);
  color: var(--color-error-text);
}

.separator {
  height: 1px;
  background-color: var(--color-border);
  margin: var(--space-1) 0;
}

/* --- Animation --- */

@keyframes slideDownAndFade {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}